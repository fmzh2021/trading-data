name: 股票实时监控

on:
  schedule:
    # 每个交易日的 9:30, 10:00, 11:00, 13:00, 14:00, 15:00 (北京时间) 执行
    # UTC 时间需要减 8 小时
    - cron: '30 1,2,3,5,6,7 * * 1-5'  # 周一至周五
  workflow_dispatch:  # 允许手动触发

jobs:
  monitor:
    runs-on: ubuntu-latest
    steps:
      - name: 检出代码
        uses: actions/checkout@v3

      - name: 设置 Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: 安装依赖
        run: |
          pip install -r requirements.txt

      - name: 运行股票监控
        env:
          # 股票代码配置，多个用逗号分隔，如: 600036,000001,300001
          STOCK_CODES: ${{ secrets.STOCK_CODES || '600036' }}
        run: |
          python stock_monitor.py

